<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sudoku</title>
  <style>
    #sudoku {
      border-collapse: collapse;
    }

    #sudoku td {
      width: 30px;
      height: 30px;
      text-align: center;
      border: 1px solid black;
      cursor: pointer;
    }

    #sudoku td:focus {
      outline: 2px solid blue;
    }
  </style>
</head>
<body>

<table id="sudoku">
  <!-- 数独の初期状態を表示 -->
</table>

<script>
  // 数独の初期状態（仮の状態）を設定
  const initialSudokuState = [
    [5, 3, 0, 0, 7, 0, 0, 0, 0],
    [6, 0, 0, 1, 9, 5, 0, 0, 0],
    [0, 9, 8, 0, 0, 0, 0, 6, 0],
    [8, 0, 0, 0, 6, 0, 0, 0, 3],
    [4, 0, 0, 8, 0, 3, 0, 0, 1],
    [7, 0, 0, 0, 2, 0, 0, 0, 6],
    [0, 6, 0, 0, 0, 0, 2, 8, 0],
    [0, 0, 0, 4, 1, 9, 0, 0, 5],
    [0, 0, 0, 0, 8, 0, 0, 7, 9]
  ];

  // テーブルの要素を取得
  const sudokuTable = document.getElementById('sudoku');

  // 数独の初期状態をテーブルに追加
  for (let i = 0; i < 9; i++) {
    const row = document.createElement('tr');
    for (let j = 0; j < 9; j++) {
      const cell = document.createElement('td');
      cell.textContent = initialSudokuState[i][j] !== 0 ? initialSudokuState[i][j] : '';
      cell.addEventListener('click', () => focusCell(i, j));
      row.appendChild(cell);
    }
    sudokuTable.appendChild(row);
  }

  // フォーカスされたマスの座標を保持する変数
  let focusedCell = { row: 0, col: 0 };

  // マスにフォーカスする関数
  function focusCell(row, col) {
    focusedCell = { row, col };
    updateFocus();
  }

  // フォーカスを更新する関数
  function updateFocus() {
    // フォーカスを受けるマスに対してフォーカスを設定
    sudokuTable.querySelectorAll('td').forEach((cell, index) => {
      const rowIndex = Math.floor(index / 9);
      const colIndex = index % 9;
      if (rowIndex === focusedCell.row && colIndex === focusedCell.col) {
        cell.focus();
      } else {
        cell.blur();
      }
    });
  }

  // キーボードのイベントリスナーを追加
  document.addEventListener('keydown', handleKeyPress);

  // 数字が押されたときの処理
  function handleKeyPress(event) {
    const pressedKey = event.key;
    const isValidKey = /^\d$/.test(pressedKey);

    if (isValidKey) {
      // 数字が有効な場合、フォーカスされているマスに数字を表示
      const cellValue = parseInt(pressedKey);
      sudokuTable.rows[focusedCell.row].cells[focusedCell.col].textContent = cellValue;
    }
  }
</script>

</body>
</html>
